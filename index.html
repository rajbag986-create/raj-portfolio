<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Raj Bag | Portfolio</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  background:#050b1a;
  color:#fff;
  font-family:Arial, sans-serif;
  text-align:center;
}
.btn{
  background:#00c46a;
  color:#000;
  padding:10px 18px;
  border:none;
  border-radius:6px;
  cursor:pointer;
  margin:6px;
}
input, textarea{
  width:90%;
  max-width:400px;
  padding:10px;
  margin:8px 0;
  border-radius:6px;
  border:none;
}
textarea{height:100px}
section{margin:40px auto}
.post{
  background:#0b1635;
  padding:12px;
  margin:10px auto;
  width:90%;
  max-width:500px;
  border-radius:8px;
}
</style>
</head>

<body>

<h1>Raj Bag</h1>
<p>Data Entry • Data Analytics • Excel Expert</p>

<!-- ================= ADMIN ================= -->
<button class="btn" id="adminBtn">Admin Login</button>

<div id="loginBox" style="display:none;">
  <input type="password" id="adminPass" placeholder="Admin Password">
  <br>
  <button class="btn" id="loginBtn">Login</button>
</div>

<div id="adminPanel" style="display:none;">
  <h3>Admin Panel</h3>
  <textarea id="postText" placeholder="Write post..."></textarea><br>
  <button class="btn" id="publishBtn">Publish</button>
</div>

<section>
  <h2>Posts</h2>
  <div id="posts"></div>
</section>

<!-- ================= CONTACT ================= -->
<section>
  <h2>Contact Me</h2>

  <form id="contactForm">
    <input type="text" name="name" placeholder="Your Name" required><br>
    <input type="email" name="email" placeholder="Your Email" required><br>
    <textarea name="message" placeholder="Your Message" required></textarea><br>
    <button class="btn" type="submit">Send Message</button>
  </form>

  <p id="successMsg" style="display:none;color:#00ff99;">
    ✅ Thank you! Message sent successfully.
  </p>
</section>

<!-- ================= SCRIPT ================= -->
<script>
/* ===== ADMIN SYSTEM ===== */
const PASSWORD = "raj123";

const adminBtn = document.getElementById("adminBtn");
const loginBox = document.getElementById("loginBox");
const loginBtn = document.getElementById("loginBtn");
const adminPanel = document.getElementById("adminPanel");
const postText = document.getElementById("postText");
const publishBtn = document.getElementById("publishBtn");
const postsDiv = document.getElementById("posts");

let posts = JSON.parse(localStorage.getItem("posts")) || [];

adminBtn.onclick = () => {
  loginBox.style.display = "block";
};

loginBtn.onclick = () => {
  if (adminPass.value === PASSWORD) {
    loginBox.style.display = "none";
    adminPanel.style.display = "block";
    renderPosts();
  } else {
    alert("❌ Wrong password");
  }
};

publishBtn.onclick = () => {
  if (!postText.value.trim()) return;
  posts.unshift(postText.value);
  localStorage.setItem("posts", JSON.stringify(posts));
  postText.value = "";
  renderPosts();
};

function renderPosts(){
  postsDiv.innerHTML = "";
  posts.forEach(p => {
    const d = document.createElement("div");
    d.className = "post";
    d.innerText = p;
    postsDiv.appendChild(d);
  });
}
renderPosts();

/* ===== CONTACT FORM (FORMSPREE) ===== */
const form = document.getElementById("contactForm");
const successMsg = document.getElementById("successMsg");

form.addEventListener("submit", async (e) => {
  e.preventDefault(); // ❌ redirect বন্ধ

  const formData = new FormData(form);

  try {
    const res = await fetch("https://formspree.io/f/xzdzoyyk", {
      method: "POST",
      body: formData,
      headers: { "Accept": "application/json" }
    });

    if (res.ok) {
      form.reset();
      successMsg.style.display = "block";

      setTimeout(() => {
        successMsg.style.display = "none";
      }, 5000);

    } else {
      alert("❌ Submission failed");
    }
  } catch {
    alert("❌ Network error");
  }
});
</script>

</body>
</html>
