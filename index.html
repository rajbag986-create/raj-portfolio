<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Raj Bag | Portfolio</title>

<style>
*{
  box-sizing:border-box;
  font-family:Arial, Helvetica, sans-serif;
}

body{
  margin:0;
  background:#050b1e;
  color:#fff;
  text-align:center;
}

/* ---------- HEADER ---------- */
header{
  padding:60px 20px;
}

header h1{
  color:#2ecc71;
  font-size:42px;
  margin-bottom:10px;
}

header p{
  opacity:0.9;
}

.btn{
  padding:12px 22px;
  margin:8px;
  border:none;
  border-radius:8px;
  background:#2ecc71;
  color:#000;
  font-weight:bold;
  cursor:pointer;
}

.btn:hover{
  opacity:0.85;
}

/* ---------- SECTIONS ---------- */
section{
  max-width:800px;
  margin:40px auto;
  padding:20px;
  background:#0b1437;
  border-radius:12px;
}

/* ---------- ADMIN ---------- */
#login, #admin{
  display:none;
}

input, textarea{
  width:100%;
  padding:12px;
  margin:10px 0;
  border-radius:6px;
  border:none;
}

textarea{
  min-height:100px;
}

/* ---------- POSTS ---------- */
.post{
  background:#111c4d;
  padding:15px;
  border-radius:8px;
  margin-bottom:12px;
  text-align:left;
}

.post button{
  margin-right:8px;
  margin-top:8px;
}

/* ---------- CONTACT ---------- */
#successMsg{
  display:none;
  color:#2ecc71;
  margin-top:10px;
}
</style>
</head>

<body>

<!-- ================= HEADER ================= -->
<header>
  <h1>Raj Bag</h1>
  <p>Data Entry ‚Ä¢ Data Analytics ‚Ä¢ Excel Expert</p>

  <button class="btn" id="adminBtn">Admin Login</button>

  <a href="Raj_Bag_Resume.pdf" download>
    <button class="btn">‚¨áÔ∏è Download Resume</button>
  </a>
</header>

<!-- ================= ADMIN LOGIN ================= -->
<section id="login">
  <h2>Admin Login</h2>
  <input type="password" id="adminPass" placeholder="Admin Password">
  <button class="btn" id="loginBtn">Login</button>
</section>

<!-- ================= ADMIN PANEL ================= -->
<section id="admin">
  <h2>Create Post</h2>

  <textarea id="postText" placeholder="Write post..."></textarea>

  <label>
    <input type="checkbox" id="privatePost">
    Private post (Admin only)
  </label>
  <br><br>

  <button class="btn" id="publishBtn">Publish</button>
</section>

<!-- ================= POSTS ================= -->
<section>
  <h2>My Posts</h2>
  <div id="posts"></div>
</section>

<!-- ================= CONTACT ================= -->
<section>
  <h2>Contact Me</h2>

<form
  id="contactForm"
  action="https://formspree.io/f/xzdzoyyk"
  method="POST"
  data-redirect="false"
>
  <input type="text" name="name" placeholder="Your Name" required>
  <input type="email" name="email" placeholder="Your Email" required>
  <textarea name="message" placeholder="Your Message" required></textarea>

  <!-- ‚õî type ‡¶Ö‡¶¨‡¶∂‡ßç‡¶Ø‡¶á submit -->
  <button type="submit" class="btn">Send Message</button>
</form>

<p id="successMsg" style="display:none; color:#00ff99;">
  ‚úÖ Thank you! Message sent successfully.
</p>


</section>

<!-- ================= SCRIPT ================= -->
<script>
/* ================== CONFIG ================== */
const PASSWORD = "raj123";

/* ================== ELEMENTS ================== */
const adminBtn = document.getElementById("adminBtn");
const loginBtn = document.getElementById("loginBtn");
const publishBtn = document.getElementById("publishBtn");

const loginBox = document.getElementById("login");
const adminBox = document.getElementById("admin");

const postInput = document.getElementById("postText");
const postsDiv = document.getElementById("posts");
const privateCheckbox = document.getElementById("privatePost");

/* ================== STATE ================== */
let isAdmin = false;
let posts = JSON.parse(localStorage.getItem("posts")) || [];

/* ================== ADMIN LOGIN ================== */
adminBtn.addEventListener("click", () => {
  loginBox.style.display = "block";
  loginBox.scrollIntoView({ behavior: "smooth" });
});

loginBtn.addEventListener("click", () => {
  const pass = document.getElementById("adminPass").value;

  if (pass === PASSWORD) {
    isAdmin = true;
    loginBox.style.display = "none";
    adminBox.style.display = "block";
    adminBox.scrollIntoView({ behavior: "smooth" });
    alert("‚úÖ Admin Login Successful");
    renderPosts();
  } else {
    alert("‚ùå Wrong Password");
  }
});

/* ================== ADD POST ================== */
publishBtn.addEventListener("click", () => {
  const text = postInput.value.trim();
  if (!text) return;

  posts.unshift({
    text: text,
    private: privateCheckbox.checked
  });

  localStorage.setItem("posts", JSON.stringify(posts));
  postInput.value = "";
  privateCheckbox.checked = false;
  renderPosts();
});

/* ================== RENDER POSTS ================== */
function renderPosts() {
  postsDiv.innerHTML = "";

  posts.forEach((post, index) => {
    if (post.private && !isAdmin) return;

    const div = document.createElement("div");
    div.className = "post";

    div.innerHTML = `
      <p>${post.text}</p>
      ${
        isAdmin
          ? `<button onclick="editPost(${index})">‚úèÔ∏è Edit</button>
             <button onclick="deletePost(${index})">üóëÔ∏è Delete</button>`
          : ""
      }
    `;

    postsDiv.appendChild(div);
  });
}

/* ================== DELETE ================== */
function deletePost(index) {
  if (!confirm("Delete this post?")) return;
  posts.splice(index, 1);
  localStorage.setItem("posts", JSON.stringify(posts));
  renderPosts();
}

/* ================== EDIT ================== */
function editPost(index) {
  const newText = prompt("Edit post:", posts[index].text);
  if (!newText) return;

  posts[index].text = newText;
  localStorage.setItem("posts", JSON.stringify(posts));
  renderPosts();
}

/* ================== INITIAL LOAD ================== */
renderPosts();

document.addEventListener("DOMContentLoaded", () => {
  const form = document.getElementById("contactForm");
  const successMsg = document.getElementById("successMsg");

 let isSubmitting = false;

let isSubmitting = false;

form.addEventListener("submit", async (e) => {
  e.preventDefault(); // ‚úÖ ‡¶∏‡¶¨‡¶æ‡¶∞ ‡¶Ü‡¶ó‡ßá (MOST IMPORTANT)

  if (isSubmitting) return; // double submit block
  isSubmitting = true;

  const formData = new FormData(form);

  try {
    const response = await fetch(form.action, {
      method: "POST",
      body: formData,
      headers: { Accept: "application/json" }
    });

    if (response.ok) {
      isSubmitting = false;
      form.reset();
      successMsg.style.display = "block";

      // ‚è±Ô∏è 5 ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶° ‡¶™‡¶∞ auto hide
      setTimeout(() => {
        successMsg.style.display = "none";
      }, 5000);

    } else {
      isSubmitting = false;
      alert("‚ùå Submission failed");
    }

  } catch (error) {
    isSubmitting = false;
    alert("‚ùå Network error");
  }
});

</script>


</body>
</html>
